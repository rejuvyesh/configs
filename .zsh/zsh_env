# -*- mode: sh; -*-

## Editor
if [[ -e $(which emacs-gui) ]]; then
  export EDITOR="emacs-gui-wait"
elif [[ -e $(which emacs) ]]; then
  export EDITOR="emacs"
elif [[ -e $(which vim) ]]; then
  export EDITOR="vim"
fi

export VISUAL=$EDITOR
## pager
export PAGER="less -R"

# python
export PYTHONSTARTUP="$HOME/.config/pythonrc"
export WORKON_HOME=~/.virtualenvs
source /usr/bin/virtualenvwrapper.sh

# ~/local dir
export PATH="$HOME/local/bin:$PATH"
export MANPATH="$HOME/local/share/man:$MANPATH"

# nix
source "$HOME/.nix-profile/etc/profile.d/nix.sh"
export MANPATH="$HOME/.nix-profile/share/man:$MANPATH"
export PKG_CONFIG_PATH="$HOME/.nix-profile/lib/pkgconfig:$PKG_CONFIG_PATH"

## Latex
PATH="/home/rejuvyesh/opt/texlive/2013/bin/x86_64-linux/":${PATH}

## Ruby-gems
RIPPER_TAGS_EMACS=1

# unroll rbenv code for speedup
if [[ -s ~/.rbenv ]]; then
    export PATH="$HOME/.rbenv/bin:$PATH"
    export PATH="$HOME/.rbenv/shims:$PATH"
    export RBENV_SHELL=zsh
    source "$HOME/.rbenv/completions/rbenv.zsh"
    rbenv() {
        local command
        command="$1"
        if [ "$#" -gt 0 ]; then
            shift
        fi

        case "$command" in
            rehash|shell)
                eval "`rbenv "sh-$command" "$@"`";;
            *)
                command rbenv "$command" "$@";;
        esac
    }

    ## prefer bundler
    export PATH="$HOME/.bundle/bin:$PATH"
fi

# cabal / haskell
CABAL_BIN="$HOME/local/cabal/bin"
[ -d $CABAL_BIN ] && PATH=${CABAL_BIN}:${PATH}

# go
export GOPATH=$HOME/local/go
export PATH=$GOPATH/bin:$PATH

SCRIPTS="$HOME/src/scripts"
# adding scripts and all subdirs to PATH
for dir in $(find $SCRIPTS -type d -not -path "*/.git*"); do
  PATH="$dir:$PATH"
done

# R
export R_LIBS="$HOME/local/R"

## Set Java Fonts
export JAVA_FONTS=/usr/share/fonts/TTF
export _JAVA_OPTIONS='-Dawt.useSystemAAFontSettings=on'


# explicitly set ssl certs so Nix and Gentoo interact peacefully
export OPENSSL_X509_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
export GIT_SSL_CAINFO=$OPENSSL_X509_CERT_FILE

# gtk themes
export GTK_PATH="$GTK_PATH:$HOME/.nix-profile/lib/gtk-2.0"

# hledger
export LEDGER_FILE="$HOME/Documents/spoiler/.hledger.journal"
